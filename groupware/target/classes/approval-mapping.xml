<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="approval">
	<select id="selectApprovalList" parameterType="int" resultType="approval">
		SELECT approval_no, approval_approver_no, approval_date,approval_state,approval_next_no 
		FROM approval 
		WHERE document_no = #{value}
		ORDER BY approval_no
	</select>
	
<!-- 	<insert id="insertApprovalFirst" parameterType="approval" >
		insert into approval values (approval_seq.nextval,(select nvl(max(document_no),1) from document),#{employee.employee_no},sysdate,'1',approval_seq.currval+1)
	</insert> -->
	
	<insert id="insertApproval" parameterType="approval" >
		insert into approval values (approval_seq.nextval,(select nvl(max(document_no),1) from document),#{employee.employee_no},#{approval_date},#{approval_state},approval_seq.currval+1)
	</insert>
	
	<insert id="insertApprovalLast" parameterType="approval">
		insert into approval values (approval_seq.nextval,(select nvl(max(document_no),1) from document),#{employee.employee_no},#{approval_date},#{approval_state},0)
	</insert>
	
</mapper>